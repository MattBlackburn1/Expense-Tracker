{% extends "base.html" %}
{% block title %}Reports · Expense Tracker{% endblock %}
{% block content %}

<!-- ============================================================
     Reports Dashboard Template
     ------------------------------------------------------------
     This template renders the reports page of the Expense Tracker.
     It displays:
       • A summary of total spending for the last six months
       • A category breakdown for a selected month
     Dynamic data is provided by the reports blueprint (routes.py)
     ============================================================ -->

<div class="row g-3">
    <div class="col-12 col-lg-6">
        <div class="card">
            <div class="card-header">Last 6 Months - Totals</div>
            <div class="card-body p-0">
                <table class="table mb-0">
                    <thead><tr><th>Month</th><th class ="text-end">Total</th></tr></thead>
                    <tbody>
                    {% for ym, total in month_totals %}
                    <tr>
                        <td>{{ ym }}</td>
                        <td class="text-end">£{{ "%.2f" % (total or 0) }}</td>
                    </tr>
                    {% else %}
                    <tr><td colspan="2" class="text-center text-muted">No data yet</td></tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="col-12 col-lg-6">
        <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
                <span>By Category</span>
                <form class="d-flex gap-2" method="get" action="{{ url_for('reports.index') }}">
                    <input class="form-control" type="month" name="month" value="{{ selected_month }}">
                    <button class="btn btn-primary btn-sm">View</button>
                </form>
            </div>
            <div class="card-body">
                <ul class="mb-0">
                    {% for cat, total in by_cat %}
                    <li>{{ cat }} - £{{ "%.2f" % (total or 0) }}</li>
                    {% else %}
                    <li class="text-muted">No data for {{ selected_month }}</li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>
</div>
{% endblock %}